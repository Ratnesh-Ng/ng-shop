<div class="mt-12 container mx-auto">
    <div id="main" class="md:flex md:justify-center">
        <div class="w-full md:w-6/12 p-2 md:pr-6 md:border-r">
            <div class="space-y-2">
                <div id="address"
                    class="border p-4 rounded-md bg-orange-100 bg-opacity-50 flex justify-between items-center text-[11px]">
                    <div class="w-8/12">
                        <p class="text-[12px]">Delivered to: <span class="font-semibold capitalize">Ratnesh Siddha,
                                482002</span>
                        </p>
                        <p class="capitalize">Samdariya greencity, main road, Madhotaal, jabalpur</p>
                    </div>
                    <button
                        class="rounded border border-orange-500 font-semibold p-2 uppercase text-orange-600 align-middle">
                        Change address
                    </button>
                </div>
                <div id="offers" class="border p-4 rounded-md space-y-2">
                    <div class="flex items-center w-full text-xs space-x-2">
                        <span class="material-icons text-sm">local_offer</span>
                        <span>Available Offers</span>
                    </div>
                    <ng-container *ngIf="offers|async as offers">
                        <div *ngFor="let offer of offers|slice:0:VisibleOffers" class="flex space-x-2 items-center">
                            <span>&#x2022;</span><span class="text-wrap text-[11px] text-gray-600">{{offer.info}}</span>
                        </div>
                        <div>
                            <button
                                (click)="VisibleOffers === offers.length?VisibleOffers = 1:VisibleOffers = offers.length"
                                class="space-x-2 flex items-center text-[12px] font-semibold capitalize text-orange-500">
                                <ng-container *ngIf="VisibleOffers === 1">
                                    <span>Show More</span>
                                    <span class="material-icons text-sm">expand_more</span>
                                </ng-container>
                                <ng-container *ngIf="VisibleOffers === offers.length">
                                    <span>Show Less</span>
                                    <span class="material-icons text-sm">keyboard_arrow_up</span>
                                </ng-container>
                            </button>
                        </div>
                    </ng-container>
                </div>
                <div id="action-add-remove" class="p-4 flex justify-between items-center text-sm">
                    <div class="space-x-2 flex items-center">
                        <input type="checkbox" name="" id="" [(ngModel)]="isAllChecked" (ngModelChange)="onSelectAll()">
                        <span class="uppercase font-bold">{{totalSelectedItems()}}/{{cartItems().length}} item
                            selected</span>
                    </div>
                    <div class="text-[11px] font-bold text-gray-600 flex space-x-8">
                        <button (click)="removeMultipleItemFromCart();isAllChecked = false"
                            class="uppercase">remove</button>
                        <div class="h-8 border-l border-gray-300"></div>
                        <button (click)="moveToWishlist()" class="uppercase">move to wishlist</button>
                    </div>
                </div>
                <div id="cart-item" class="space-y-2">
                    @for (item of cartItems(); let index = $index; track item.id) {
                    <div class="border flex space-x-4 p-4 rounded-md min-h-52 relative">
                        <div class="w-6/12 md:w-3/12 relative">
                            <input type="checkbox" class="absolute top-2 left-2" [(ngModel)]="item.isSelected"
                                (ngModelChange)="calculateCheckedLength(index, $event)">
                            <img class="w-full h-full object-cover" [src]="item.urls[0]" [alt]="item.name">
                        </div>
                        <div class="w-11/12">
                            <h3 id="brand" class="capitalize text-[13px] font-bold">{{item.brand}}</h3>
                            <p id="product-name" class="capitalize text-gray-700 text-[12px]">{{item.name}}</p>
                            <p class="text-gray-500 text-[11px]">Sold by: <span
                                    class="uppercase">{{item.description|slice:0:20}}</span></p>
                            <p class="text-[12px] space-x-2">
                                <span class="font-semibold">{{item.sellingPrice|currency:'INR'}}</span>
                                <span class="text-gray-400 line-through">{{item.actualPrice|currency:'INR'}}</span>
                                <span class="text-orange-500">{{item.discount}}% OFF</span>
                            </p>
                            <div>
                                <div class="py-2 flex space-x-2">
                                    <span
                                        class="bg-gray-200 p-[1px] px-[5px] font-bold text-[12px] flex items-center w-fit">
                                        Size:{{item.size}}
                                        <span class="material-icons text-sm">expand_more</span>
                                    </span>
                                    <span
                                        class="bg-gray-200 p-[1px] px-[5px] font-bold text-[12px] flex items-center w-fit">
                                        Qty:{{item.quantity}}
                                        <span class="material-icons text-sm">expand_more</span>
                                    </span>
                                </div>
                            </div>
                            <p class="text-[12px] flex items-center space-x-1 mt-1">
                                <span class="material-icons text-xs">keyboard_return</span>
                                <span class="font-semibold">14 days</span>
                                <span>return available</span>
                            </p>
                            <p class="text-[12px] flex items-center space-x-1 mt-2">
                                <span class="material-icons text-sm text-green-600 font-bold">done</span>
                                <span>Delivery by</span>
                                <span class="font-semibold">{{item.deliveredTill|date:"dd MMM"}}</span>
                            </p>
                        </div>
                        <button (click)="removeItemFromCart(item)" class="absolute top-2 right-2"><span
                                class="material-icons">close</span></button>
                    </div>
                    }
                </div>
                <a [routerLink]="appRoutes.wishlist"
                    class="border p-4 rounded-md w-full flex justify-between items-center">
                    <div class="flex items-center space-x-2">
                        <span class="material-icons text-[20px]">bookmark_border</span>
                        <span class="capitalize text-[14px] font-semibold">add more from wishlist</span>
                    </div>
                    <div class="flex items-center">
                        <span class="material-icons text-[20px]">
                            arrow_forward_ios
                        </span>
                    </div>
                </a>
            </div>
        </div>
        <div class="w-full md:w-3/12 p-2 md:pl-4">
            <div class="space-y-4 text-[12px] font-semibold">
                <div id="coupon" class="space-y-2 border-b pb-4">
                    <div class="uppercase text-[11px] text-gray-600">Coupons</div>
                    <div class="flex justify-between items-center">
                        <div class="flex justify-between items-center space-x-4">
                            <span class="material-icons-outlined text-[20px]">sell</span>
                            <span class="capitalize font-semibold">Apply Coupons</span>
                        </div>
                        <button
                            class="rounded-[2px] border border-orange-500 font-semibold px-3 py-1 uppercase text-orange-600 align-middle">
                            Apply
                        </button>
                    </div>
                </div>
                <div id="donation" class="space-y-4 border-b pb-4">
                    <div class="uppercase text-[11px] text-gray-600">
                        support transformative social work in india
                    </div>
                    <div class="space-x-2 flex items-center">
                        <input type="checkbox" name="" id=""> <span class="font-bold">Donate and make a
                            difference</span>
                    </div>
                    <div class="flex space-x-2">
                        <button *ngFor="let item of [10,20,50,100]"
                            class="rounded-3xl border text-center p-2 px-3 font-bold">{{item|currency:'INR'}}</button>
                    </div>
                    <button class="capitalize text-orange-500">Know more</button>
                </div>
                <div id="price-breakup" class="space-y-4 border-b pb-4">
                    <div class="text-gray-600 space-x-1"><span class="uppercase">product details</span><span
                            *ngIf="cartItems().length" class="text-[10px]">({{cartItems().length}} Items)</span></div>
                    <div class="grid grid-cols-3 gap-y-2 font-normal">
                        <div class="col-span-2">Total MRP</div>
                        <div class="text-right">{{productDetails.totalMrp|currency:'INR'}}</div>
                        <div class="col-span-2">Discount on MRP</div>
                        <div class="text-right text-green-600">{{-productDetails.discountOnMrp|currency:'INR'}}</div>
                        <div class="col-span-2">Coupon Discount</div>
                        <div class="text-right text-orange-500 text-nowrap">Apply Coupon</div>
                        <div class="col-span-2">Platform Fee</div>
                        <div class="text-right">{{productDetails.platformFee|currency:'INR'}}</div>
                        <div class="col-span-2">Shipping Fee</div>
                        <div class="text-right" [ngClass]="{'text-green-600':!productDetails.shippingFee}">
                            {{productDetails.shippingFee?(productDetails.shippingFee|currency:'INR'):'Free'}}
                        </div>
                    </div>
                </div>
                <div id="total" class="space-y-4">
                    <div class="flex justify-between items-center font-bold text-[13px]">
                        <span class="uppercase">total
                            amount</span><span>{{productDetails.totalAmountToPay|currency:'INR'}}</span>
                    </div>
                    <button class="uppercase text-center py-3 w-full bg-orange-500 text-white rounded">
                        place order
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<p-confirmDialog #cd>
    <ng-template pTemplate="headless" let-message>
        <div class="bg-white rounded">
            <div class="px-6 py-4">
                <span class="font-bold block mb-2">
                    {{ message.header }}
                </span>
                <p class="mb-0 text-sm text-gray-700">{{ message.message }}</p>
            </div>
            <div class="flex border-t mt-2 p-2">
                <button pButton label="CANCEL" (click)="cd.reject()" class="text-xs text-gray-600 w-1/2 p-2">
                </button>
                <button pButton label="MOVE TO WISHLIST" (click)="cd.accept()" class=" text-orange-500 text-xs w-1/2 p-2">
                </button>
            </div>
        </div>
    </ng-template>
</p-confirmDialog>